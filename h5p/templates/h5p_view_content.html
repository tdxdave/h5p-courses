{% extends "site_base.html" %}
{% load staticfiles %}

{% block page_scripts %}
<script type="text/javascript" src="{% static "/js/jquery.js" %}"></script>
<script type="text/javascript" src="{% static "/js/h5p.js" %}"></script>
<script type="text/javascript" src="{% static "/js/h5p-event-dispatcher.js" %}"></script>
<script type="text/javascript" src="{% static "/js/h5p-x-api-event.js" %}"></script>
<script type="text/javascript" src="{% static "/js/h5p-x-api.js" %}"></script>
<script type="text/javascript" src="{% static "/js/h5p-content-type.js" %}"></script>
<!-- preload js for content libraries -->
{% for js in all_js %}
<script type="text/javascript" src="{{js}}"></script>
{% endfor %}
<!-- end preload -->
<script type="text/javascript">
$(document).ready(function() {  window.H5PIntegration = {
  "baseUrl": "http://{{SITE_DOMAIN}}", // No trailing slash
  "url": "/site_media/media/h5p/",          // Relative to web root
  "postUserStatistics": true,         // Only if user is logged in
  "ajaxPath": "{{ajax_path}}",     // Only used by older Content Types
  "ajax": {
    // Where to post user results
    "setFinished": "{{set_finished_url}}",
    // Words beginning with : are placeholders
    "contentUserData": "{{continue_user_data}}"
  },
  "saveFreq": 30, // How often current content state should be saved. false to disable.
  "user": { // Only if logged in !
    "name": "{{request.user.first_name}}",
    "mail": "{{request.user.email}}"
  },
  "siteUrl": "{{site_url}}", // Only if NOT logged in!
  "l10n": { // Text string translations
    "H5P": {
      "fullscreen": "Fullscreen",
      "disableFullscreen": "Disable fullscreen",
      "download": "Download",
      "copyrights": "Rights of use",
      "embed": "Embed",
      "size": "Size",
      "showAdvanced": "Show advanced",
      "hideAdvanced": "Hide advanced",
      "advancedHelp": "Include this script on your website if you want dynamic sizing of the embedded content:",
      "copyrightInformation": "Rights of use",
      "close": "Close",
      "title": "Title",
      "author": "Author",
      "year": "Year",
      "source": "Source",
      "license": "License",
      "thumbnail": "Thumbnail",
      "noCopyrights": "No copyright information available for this content.",
      "downloadDescription": "Download this content as a H5P file.",
      "copyrightsDescription": "View copyright information for this content.",
      "embedDescription": "View the embed code for this content.",
      "h5pDescription": "Visit H5P.org to check out more cool content.",
      "contentChanged": "This content has changed since you last used it.",
      "startingOver": "You'll be starting over.",
      "by": "by",
      "showMore": "Show more",
      "showLess": "Show less",
      "subLevel": "Sublevel"
    }
  },
  "loadedJs": [], // Only required when Embed Type = div
  "loadedCss": [],
  "contents": []
};
window.H5PIntegration.contents['cid-{{content.id}}'] = {
  "library": "{{main_library.machine_name}} {{main_library.major_version}}.{{main_library.minor_version}}", // Library name + major version.minor version
  "jsonContent": "{{content.json_content|safe}}",
  "fullScreen": false, // No fullscreen support
  "exportUrl": "",
  "embedCode": "<div class=\"h5p-content\" data-content-id=\"{{content.id}}\"></div>",
  "resizeCode": "",
  "mainId": {{content.id}},
  "url": "/site_media/media/h5p/content/{{content.id}}/",
  "title": "Example Content",
  "contentUserData": {
    0: { // Sub ID (0 = main content/no id)
      'state': false // Data ID
    }
  },
  "disable": 0,  // Flags for disabling frame and action buttons
  "styles": [],
  "scripts": [],
};
});
</script>
{% endblock %}

{% block page_styles %}
<link rel="stylesheet" href="{% static "/css/h5p.css" %}">
{% for css in all_css %}
<link rel="stylesheet" href="{{css}}">
{% endfor %}
{% endblock %}
{% block body %}
<div class="h5p-content" data-content-id="{{content.id}}"></div>
{% endblock %}
